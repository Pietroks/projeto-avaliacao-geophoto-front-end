<template>
  <Notification :visible="notification.visible" :message="notification.message" :type="notification.type" @close="hideNotification" />

  <section class="hero-section">
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-xl-10 col-lg-11 text-center">
          <div class="hero-card">
            <h1 class="titulo-principal">III Pr√™mio Brasileiro de Fotogeografia 2025</h1>

            <div class="tema-chip">
              <span>Tema Oficial:</span>
              <strong>Geopatrim√¥nio e Geoconserva√ß√£o</strong>
            </div>

            <p class="paragrafo-principal mt-3">
              Iniciativa do LAGIM/UnB para estimular a produ√ß√£o de imagens geogr√°ficas por estudantes e profissionais de Geografia. Mostre
              sua leitura visual do territ√≥rio e concorra a pr√™mios!
            </p>

            <router-link to="/cadastro" class="cta-hero">
              Inscreva-se agora
              <font-awesome-icon icon="arrow-right" class="ms-2" />
            </router-link>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="conteudo-section">
    <div class="container py-5">
      <div class="row g-4 mb-5 align-items-stretch">
        <div class="col-lg-5">
          <h3 class="titulo-secao">Categorias & Subcategorias</h3>
          <p class="paragrafo-secao">
            Tr√™s categorias (Gradua√ß√£o, P√≥s-Gradua√ß√£o e Profissionais), cada uma com duas subcategorias:
            <em>Foto √önica</em> (A) e <em>Ensaio Fotogeogr√°fico</em> (B).
          </p>
        </div>

        <div class="col-lg-7">
          <div class="acordeao-container">
            <div class="acordeao-item" v-for="sub in subcategorias" :key="sub.titulo">
              <div class="subcat-card" @click="toggleGaveta(sub)" :class="{ ativo: gavetaAberta === sub.titulo }">
                <h5>{{ sub.titulo }}</h5>
                <p>{{ sub.desc }}</p>
              </div>

              <transition name="slide-fade">
                <div v-if="gavetaAberta === sub.titulo" class="gaveta-conteudo">
                  <h6 class="mb-3">Requisitos:</h6>
                  <ul>
                    <li v-for="(req, idx) in sub.requisitos" :key="idx">{{ req }}</li>
                  </ul>
                </div>
              </transition>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-5">
        <div class="col-12">
          <div class="premios-card">
            <h3 class="titulo-secao text-center mb-3">Premia√ß√£o</h3>
            <ul class="lista-premios">
              <li>üèÖ Medalha LAGIM de Fotogeografia</li>
              <li>üìú Certificado de Participa√ß√£o</li>
              <li>üìö Inclus√£o no e-book (3 primeiros de cada subcategoria)</li>
            </ul>
            <div class="prize-grid mt-3">
              <div class="prize-item"><strong>ü•á 1¬∫ Lugar:</strong> C√¢mera instant√¢nea</div>
              <div class="prize-item"><strong>ü•à 2¬∫ Lugar:</strong> Cart√£o Micro-SD 128GB</div>
              <div class="prize-item"><strong>ü•â 3¬∫ Lugar:</strong> Trip√© de 1,45 m</div>
            </div>
            <p class="nota-ate10 text-center mt-3">Certificado para os classificados at√© o 10¬∫ lugar em cada subcategoria.</p>
          </div>
        </div>
      </div>

      <div class="divInscricao">
        <h3 class="titulo-secao">Inscri√ß√µes</h3>
        <p class="paragrafo-secao">
          Per√≠odo: <strong>30/08/2025 a 10/10/2025</strong>. Participa√ß√£o individual, somente para maiores de 18 anos. Envie at√©
          <strong>4 fotos</strong> conforme o edital.
        </p>
        <router-link to="/cadastro" class="cta-btn">
          Fazer inscri√ß√£o
          <font-awesome-icon icon="arrow-right" class="ms-2" />
        </router-link>
        <p class="paragrafo-secao importanteParagrafo">
          <strong>Importante:</strong> Envie apenas obras autorais. Consulte o edital para requisitos t√©cnicos e de submiss√£o.
        </p>
      </div>

      <div class="row justify-content-center mb-5">
        <div class="col-lg-10">
          <h2 class="titulo-cronograma">Crit√©rios de Avalia√ß√£o (100 pts)</h2>
          <div class="table-responsive">
            <table class="table table-custom">
              <thead>
                <tr>
                  <th>Crit√©rio</th>
                  <th>Pontua√ß√£o</th>
                  <th>Descri√ß√£o</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Relev√¢ncia</td>
                  <td>0‚Äì20</td>
                  <td>Ader√™ncia ao tema e profundidade geogr√°fica.</td>
                </tr>
                <tr>
                  <td>Divulga√ß√£o</td>
                  <td>0‚Äì20</td>
                  <td>Potencial comunicativo e de socializa√ß√£o do conhecimento.</td>
                </tr>
                <tr>
                  <td>Educa√ß√£o</td>
                  <td>0‚Äì20</td>
                  <td>Car√°ter formativo e contribui√ß√£o did√°tico-pedag√≥gica.</td>
                </tr>
                <tr>
                  <td>Articula√ß√£o</td>
                  <td>0‚Äì20</td>
                  <td>Coer√™ncia entre t√≠tulo, texto e imagem(ens).</td>
                </tr>
                <tr>
                  <td>Est√©tica</td>
                  <td>0‚Äì20</td>
                  <td>Composi√ß√£o, t√©cnica e originalidade.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="row justify-content-center">
        <div class="col-lg-10">
          <h2 class="titulo-cronograma">Cronograma</h2>
          <div class="table-responsive">
            <table class="table table-custom">
              <thead>
                <tr>
                  <th>Etapa</th>
                  <th>Data</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Abertura e publica√ß√£o do edital</td>
                  <td>25/08/2025</td>
                </tr>
                <tr>
                  <td>Per√≠odo de inscri√ß√µes</td>
                  <td>30/08/2025 a 10/10/2025</td>
                </tr>
                <tr>
                  <td>Avalia√ß√£o</td>
                  <td>11/10/2025 a 16/10/2025</td>
                </tr>
                <tr>
                  <td>Reuni√£o da comiss√£o</td>
                  <td>17 e 18/10/2025</td>
                </tr>
                <tr>
                  <td>Divulga√ß√£o do resultado</td>
                  <td>20/10/2025</td>
                </tr>
                <tr>
                  <td>Envio dos pr√™mios</td>
                  <td>At√© 31/10/2025</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="text-center mt-4">
            <button class="button-edital" @click="baixarEditalPDF" :disabled="isDownloading">
              {{ isDownloading ? "Baixando..." : "Acesse o Edital" }}
            </button>
          </div>
        </div>
      </div>

      <div v-if="modalAberto" class="modal-overlay" @click.self="fecharModal">
        <div class="modal-card">
          <button class="modal-close" @click="fecharModal">&times;</button>
          <h4 class="mb-3">{{ modalConteudo.titulo }}</h4>
          <ul>
            <li v-for="(req, idx) in modalConteudo.requisitos" :key="idx">{{ req }}</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <Footer />
</template>

<script>
import Footer from "@/components/Footer.vue";
import Notification from "@/components/Notification.vue";

export default {
  name: "PremiacaoPage",
  components: { Footer, Notification },
  data() {
    return {
      gavetaAberta: false,
      isDownloading: false,
      notification: {
        visible: false,
        message: "",
        type: "info",
      },
      subcategorias: [
        {
          titulo: "1A ¬∑ Gradua√ß√£o ‚Äì Foto √önica",
          desc: "Uma fotografia que sintetize o tema.",
          requisitos: [
            "At√© 1 foto autoral in√©dita.",
            "Formato: JPG ou PNG.",
            "Dimens√£o m√≠nima: 3000px no lado maior.",
            "Resolu√ß√£o m√≠nima: 300 DPI.",
            "At√© 10 MB por arquivo.",
          ],
        },
        {
          titulo: "1B ¬∑ Gradua√ß√£o ‚Äì Ensaio",
          desc: "S√©rie coesa de at√© 3‚Äì5 imagens com narrativa.",
          requisitos: [
            "De 3 a 5 fotos autorais in√©ditas.",
            "Formato: JPG ou PNG.",
            "Dimens√£o m√≠nima: 3000px no lado maior.",
            "Resolu√ß√£o m√≠nima: 300 DPI.",
            "At√© 10 MB por arquivo.",
          ],
        },
        {
          titulo: "2A ¬∑ P√≥s-Gradua√ß√£o ‚Äì Foto √önica",
          desc: "Registro singular com for√ßa conceitual e t√©cnica.",
          requisitos: [
            "At√© 1 foto autoral in√©dita.",
            "Formato: JPG ou PNG.",
            "Dimens√£o m√≠nima: 3000px no lado maior.",
            "Resolu√ß√£o m√≠nima: 300 DPI.",
            "At√© 10 MB por arquivo.",
          ],
        },
        {
          titulo: "2B ¬∑ P√≥s-Gradua√ß√£o ‚Äì Ensaio",
          desc: "Sequ√™ncia que articule tema, lugar e tempo.",
          requisitos: [
            "De 3 a 5 fotos autorais in√©ditas.",
            "Formato: JPG ou PNG.",
            "Dimens√£o m√≠nima: 3000px no lado maior.",
            "Resolu√ß√£o m√≠nima: 300 DPI.",
            "At√© 10 MB por arquivo.",
          ],
        },
        {
          titulo: "3A ¬∑ Profissionais ‚Äì Foto √önica",
          desc: "Imagem autoral de forte leitura geogr√°fica.",
          requisitos: [
            "At√© 1 foto autoral in√©dita.",
            "Formato: JPG ou PNG.",
            "Dimens√£o m√≠nima: 3000px no lado maior.",
            "Resolu√ß√£o m√≠nima: 300 DPI.",
            "At√© 10 MB por arquivo.",
          ],
        },
        {
          titulo: "3B ¬∑ Profissionais ‚Äì Ensaio",
          desc: "Conjunto com unidade est√©tica e narrativa.",
          requisitos: [
            "De 3 a 5 fotos autorais in√©ditas.",
            "Formato: JPG ou PNG.",
            "Dimens√£o m√≠nima: 3000px no lado maior.",
            "Resolu√ß√£o m√≠nima: 300 DPI.",
            "At√© 10 MB por arquivo.",
          ],
        },
      ],
    };
  },
  methods: {
    showNotification(message, type = "info", duration = 5000) {
      this.notification.message = message;
      this.notification.type = type;
      this.notification.visible = true;

      setTimeout(() => {
        this.hideNotification();
      }, duration);
    },
    hideNotification() {
      this.notification.visible = false;
    },

    baixarEditalPDF() {
      const urlPDF = "/Edital III Premio Fotogeografia.pdf";
      const nomeArquivo = "Edital III Premio Fotogeografia.pdf";

      this.isDownloading = true;

      try {
        const a = document.createElement("a");
        a.href = urlPDF;
        a.download = nomeArquivo;
        a.style.display = "none";
        document.body.appendChild(a);
        a.click();
        a.remove();
      } catch (e) {
        console.error(e);
        this.showNotification("Ocorreu um erro ao tentar baixar o edital.");
      } finally {
        setTimeout(() => {
          this.isDownloading = false;
        }, 500);
      }
    },

    toggleGaveta(sub) {
      if (this.gavetaAberta === sub.titulo) {
        this.gavetaAberta = null;
      } else {
        this.gavetaAberta = sub.titulo;
      }
    },
  },
};
</script>

<style scoped>
.hero-section {
  background: url("../assets/hex6.webp") no-repeat center center / cover fixed;
  color: #0c2a3d;
}
.hero-card {
  background-color: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(8px);
  padding: 2.5rem;
  border-radius: 22px;
  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.18);
  border: 1px solid rgba(19, 122, 190, 0.15);
}
.titulo-principal {
  font-size: clamp(1.8rem, 3.2vw, 3.2rem);
  color: #137abe;
  font-weight: 800;
  letter-spacing: 0.2px;
  margin-bottom: 0.75rem;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
}
.tema-chip {
  display: inline-flex;
  gap: 0.5rem;
  align-items: center;
  background: linear-gradient(90deg, #e9f4ff, #fff);
  border: 1px solid rgba(19, 122, 190, 0.25);
  color: #0a2b45;
  padding: 0.5rem 1rem;
  border-radius: 999px;
  box-shadow: 0 6px 18px rgba(19, 122, 190, 0.15);
}
.cta-hero {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 1rem;
  padding: 0.8rem 1.4rem;
  border-radius: 12px;
  background: #137abe;
  color: #fff;
  text-decoration: none;
  font-weight: 700;
  box-shadow: 0 10px 22px rgba(19, 122, 190, 0.32);
  transition: transform 0.15s ease, box-shadow 0.15s ease, filter 0.15s;
}
.cta-hero:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 14px 28px rgba(19, 122, 190, 0.4);
  filter: saturate(1.05);
}

/* ====== CONTE√öDO BASE ====== */
.conteudo-section {
  background: #0e0e0f;
  color: #f5f7fa;
}

/* T√≠tulos & Texto */
.titulo-secao {
  font-size: clamp(1.3rem, 2.2vw, 2rem);
  color: #66b4e6;
  font-weight: 700;
}
.paragrafo-secao {
  font-size: 1.05rem;
  color: #e3e8ee;
  opacity: 0.95;
}

/* ====== SUBCATEGORIAS ====== */
.subcats-grid {
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
}
.subcat-card {
  background: linear-gradient(180deg, #1d242b, #1a1f25);
  border: 1px solid rgba(255, 255, 255, 0.06);
  padding: 1rem;
  border-radius: 16px;
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.3);
  cursor: pointer;
}
.subcat-card h5 {
  margin: 0 0 0.25rem;
  font-weight: 700;
  color: #bfe2ff;
}
.subcat-card p {
  margin: 0;
  color: #b9c4cf;
}

/* ====== PREMIA√á√ÉO ====== */
.premios-card {
  background: linear-gradient(180deg, #19222b, #141b22);
  border: 1px solid rgba(102, 180, 230, 0.2);
  padding: 2rem;
  border-radius: 18px;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.35);
}
.lista-premios {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem 1.25rem;
  margin: 0;
  padding: 0;
  list-style: none;
  color: #d9e7f3;
}
.prize-grid {
  display: grid;
  gap: 0.75rem;
  margin-top: 0.5rem;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}
.prize-item {
  background: #222a33;
  border: 1px solid rgba(255, 255, 255, 0.06);
  padding: 0.75rem 1rem;
  border-radius: 12px;
  color: #e5eff8;
  text-align: center;
}
.nota-ate10 {
  color: #b6c7d6;
}

/* ====== INSCRI√á√ÉO (CTA CAIXA) ====== */
.divInscricao {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
  border: 1px solid rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(10px);
  padding: 2rem;
  border-radius: 20px;
  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.35);
  margin: 2.25rem auto 3rem;
  width: min(760px, 92%);
  text-align: center;
}
.cta-btn {
  display: inline-block;
  background: #137abe;
  color: #fff;
  text-decoration: none;
  padding: 0.85rem 1.4rem;
  font-weight: 800;
  border-radius: 12px;
  margin: 0.75rem 0 0;
  transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s;
  box-shadow: 0 10px 24px rgba(19, 122, 190, 0.35);
}
.cta-btn:hover {
  background: #0d5f93;
  transform: translateY(-2px);
  box-shadow: 0 14px 30px rgba(19, 122, 190, 0.45);
}

.importanteParagrafo {
  font-size: 0.9rem;
  font-style: italic;
  color: #a3afba;
}

/* ====== TABELAS ====== */
.titulo-cronograma {
  font-size: clamp(1.4rem, 2.4vw, 2.2rem);
  text-align: center;
  color: #66b4e6;
  font-weight: 800;
  margin-bottom: 1.2rem;
}
.table-custom {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 10px;
  overflow: hidden;
}
.table-custom th,
.table-custom td {
  padding: 1rem 1.2rem;
  text-align: center;
  font-size: 1rem;
  vertical-align: middle;
}
.table-custom th {
  background: #0d2a49;
  color: #eaf6ff;
  font-weight: 700;
  border-top-left-radius: 14px;
  border-top-right-radius: 14px;
}
.table-custom td {
  background: #1f2630;
  color: #e8f2fa;
}
.table-custom tbody tr:last-child td:first-child {
  border-bottom-left-radius: 14px;
}
.table-custom tbody tr:last-child td:last-child {
  border-bottom-right-radius: 14px;
}
.table-custom tbody tr {
  transition: transform 0.18s ease, box-shadow 0.18s ease;
}
.table-custom tbody tr:hover {
  transform: scale(1.01);
  box-shadow: 0 8px 26px rgba(0, 0, 0, 0.38);
}

/* ====== BOT√ÉO EDITAL ====== */
.button-edital {
  display: inline-block;
  color: #fff;
  font-size: 1.2rem;
  font-weight: 800;
  background: #0d2a49;
  padding: 0.9rem 2rem;
  border-radius: 14px;
  border: none;
  box-shadow: 0 10px 24px rgba(13, 42, 73, 0.45);
  transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s;
}
.button-edital:hover {
  background: #137abe;
  transform: translateY(-2px);
  box-shadow: 0 14px 32px rgba(19, 122, 190, 0.45);
}

/* Estilos para gaveta */
.acordeao-container {
  display: grid;
  gap: 1rem;
}

.subcat-card {
  cursor: pointer;
  transition: all 0.3s ease;
  border: 1px solid #ddd;
  padding: 1rem;
  border-radius: 8px;
}

.subcat-card.ativo,
.subcat-card:hover {
  border-color: #017d8b;
  background-color: #f8f9fa;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.gaveta-conteudo {
  padding: 1rem;
  background-color: inherit;
  border: 1px solid #e0e0e0;
  border-top: none;
  border-radius: 0 0 8px 8px;
  margin-top: -8px;
}

.gaveta-conteudo ul {
  padding-left: 1.2rem;
  margin-bottom: 0;
}

.slide-fade-enter-active {
  transition: all 0.3s ease-out;
}

.slide-fade-leave-active {
  transition: all 0.3s cubic-bezier(1, 0.5, 0.8, 1);
}

.slide-fade-enter-from,
.slide-fade-leave-to {
  transform: translateY(-10px);
  opacity: 0;
}
/* ====== RESPONSIVO ====== */
@media (max-width: 767px) {
  .hero-card {
    padding: 1.5rem;
  }
  .paragrafo-principal {
    font-size: 1.05rem;
  }
}
</style>
